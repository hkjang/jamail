# 권한 관리 가이드

Jamail은 **역할 기반 접근 제어 (RBAC)** 시스템을 통해 사용자의 권한을 관리합니다. 각 사용자는 하나의 역할을 가지며, 역할에 따라 접근할 수 있는 기능과 데이터가 제한됩니다.

## 1. 역할 (Roles)

시스템에는 세 가지 기본 역할이 존재합니다:

### 👑 관리자 (Admin)
- **모든 권한**을 가집니다.
- 시스템의 모든 설정, 사용자 관리, SMTP 설정 등 민감한 정보에 접근하고 수정할 수 있습니다.
- 템플릿 삭제와 같은 파괴적인 작업은 관리자만 수행할 수 있습니다.

### 🛠️ 운영자 (Operator)
- **서비스 운영**에 필요한 대부분의 권한을 가집니다.
- 템플릿 생성/수정, 이메일 발송, 웹훅 관리 등을 수행할 수 있습니다.
- 시스템 설정이나 사용자 관리, 템플릿 삭제 권한은 없습니다.

### 👁️ 뷰어 (Viewer)
- **읽기 전용** 권한을 가집니다.
- 템플릿 목록 조회, 상세 내용 확인, 통계 확인 등이 가능합니다.
- 데이터를 수정하거나 이메일을 발송할 수 없습니다.

## 2. 권한 범위 (Scopes)

각 역할은 다음과 같은 세부 권한 범위(Scope)를 가집니다.

| 기능 영역 | 권한 범위 (Scope) | 설명 |
|---|---|---|
| **템플릿** | `read_templates` | 템플릿 목록 및 상세 조회 |
| | `write_templates` | 템플릿 생성, 수정, 버전 관리 |
| | `delete_templates` | 템플릿 삭제 (관리자 전용) |
| | `send_email` | 이메일 발송 테스트 및 실행 |
| **웹훅** | `read_webhooks` | 웹훅 목록 및 상세 조회 |
| | `manage_webhooks` | 웹훅 생성, 수정, 삭제, 테스트 |
| **설정** | `read_settings` | SMTP 등 시스템 설정 조회 |
| | `manage_settings` | 시스템 설정 변경 (관리자 전용) |

## 3. 역할별 기능 매트릭스

| 기능 | 관리자 (Admin) | 운영자 (Operator) | 뷰어 (Viewer) |
|---|:---:|:---:|:---:|
| **템플릿 조회** | ✅ | ✅ | ✅ |
| **템플릿 생성/수정** | ✅ | ✅ | ❌ |
| **템플릿 삭제** | ✅ | ❌ | ❌ |
| **이메일 발송** | ✅ | ✅ | ❌ |
| **웹훅 관리** | ✅ | ✅ | ❌ |
| **API 키 관리** | ✅ | ✅ | ❌ |
| **SMTP 설정** | ✅ | ❌ | ❌ |
| **사용자 관리** | ✅ | ❌ | ❌ |

## 4. API 키 권한

API 키를 생성할 때도 위와 동일한 역할 기반의 권한이 적용됩니다. 외부 시스템 연동 시 최소한의 권한(예: 발송 전용이라면 Operator 권한)을 가진 API 키를 사용하는 것이 보안상 권장됩니다.
